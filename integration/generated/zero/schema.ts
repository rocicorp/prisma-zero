// This file was automatically generated by prisma-zero.
// You should NOT make any changes in this file as it will be overwritten.

import {
  boolean,
  createBuilder,
  createCRUDBuilder,
  createSchema,
  number,
  relationships,
  string,
  table,
} from '@rocicorp/zero';

export const userTable = table('User')
  .columns({
    id: string(),
    email: string(),
    name: string(),
    createdAt: number(),
  })
  .primaryKey('id');

export const postTable = table('Post')
  .columns({
    id: string(),
    title: string(),
    content: string().optional(),
    published: boolean(),
    authorId: string(),
  })
  .primaryKey('id');

export const userTableRelationships = relationships(userTable, ({many}) => ({
  posts: many({
    sourceField: ['id'],
    destField: ['authorId'],
    destSchema: postTable,
  }),
}));
export const postTableRelationships = relationships(postTable, ({one}) => ({
  author: one({
    sourceField: ['authorId'],
    destField: ['id'],
    destSchema: userTable,
  }),
}));
/**
 * The Zero schema object.
 * This type is auto-generated from your Prisma schema definition.
 */
export const schema = createSchema({
  tables: [userTable, postTable],
  relationships: [userTableRelationships, postTableRelationships],
});

/**
 * Represents the Zero schema type.
 * This type is auto-generated from your Prisma schema definition.
 */
export type Schema = typeof schema;
/**
 * Represents the ZQL query builder.
 * This type is auto-generated from your Prisma schema definition.
 */
export const zql = createBuilder(schema);
/**
 * Represents the Zero schema query builder.
 * This type is auto-generated from your Prisma schema definition.
 *
 * @deprecated Use `zql` instead.
 */
export const builder = zql;
/**
 * Represents the Zero schema CRUD builder.
 * This type is auto-generated from your Prisma schema definition.
 */
export const crud = createCRUDBuilder(schema);
/** Defines the default types for Zero */
declare module '@rocicorp/zero' {
  interface DefaultTypes {
    schema: Schema;
  }
}
